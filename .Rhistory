d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
pushViewport(vp = viewport())
grid.newpage()
pushViewport(vp = viewport())
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
?connectGrob()
?pushViewport()
pushViewport(viewport(x=1, y=1))
grid.newpage()
pushViewport(viewport(x=1, y=1))
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
grid.newpage()
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
pushViewport(vp = viewport())
grid.newpage()
pushViewport(vp = viewport())
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
grid.newpage()
pushViewport(viewport(x=x, y=y))
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
grid.newpage()
pushViewport(viewport(x=x, y=y, width = width, height = height))
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
grid.newpage()
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
install.packages("DiagrammeR")
install.packages("DiagrammeR")
library(DiagrammeR)
grViz("
digraph first_attempt {
node [shape = box,
fontname = Helvetica,
colour = black]
a; b; c; d; e
node [shape = point,
colour = black]
1; 2; 3; 4; 5
a->b; a->1; 1->b
1->d
b->c; b->2; 2->c
2->e
}
")
grViz("
digraph first_attempt {
node [shape = box,
fontname = Helvetica,
colour = black]
a; b; c; d; e
node [shape = point,
colour = black]
1; 2; 3; 4; 5
a->1; 1->b
1->d
b->2; 2->c
2->e
}
")
grViz("
digraph first_attempt {
node [shape = box,
fontname = Helvetica,
colour = black]
a; b; c; d; e
node [shape = point,
colour = black]
1; 2; 3; 4; 5
node [shape = point,
colour = white]
x; y; z
a->b; a->1; 1->b
1->d
b->c; b->2; 2->c
2->e
a->x; x->d; d->y; b->y; y->e; e->z; z->c [colour = white]
}
")
grViz("
digraph g {
start [shape = box, label = "CONSORT Graph"];
node0 [shape = box, label = "All Patients\nN=1000"];
node1 [shape = box, label = "Full Analysis Set\nN=800"];
node2 [shape = box, label = "Excluded\nN=100"];
node3 [shape = box, label = "Not Included\nN=100"];
node4 [shape = box, label = "Safety Set\nN=700"];
node5 [shape = box, label = "Not Dosed\nN=100"];
node6 [shape = box, label = "Treatment A\nN=200"];
node7 [shape = box, label = "Treatment B\nN=150"];
node8 [shape = box, label = "Treatment C\nN=200"];
node9 [shape = box, label = "Treatment D\nN=150"];
start -> node0 -> node1 -> node4 -> {node6 node7 node8 node9};
node0 -> node2;
node0 -> node3;
node1 -> node5;
}")
grViz ("
digraph g {
start [shape = box, label = "CONSORT Graph"];
node0 [shape = box, label = "All Patients\nN=1000"];
node1 [shape = box, label = "Full Analysis Set\nN=800"];
node2 [shape = box, label = "Excluded\nN=100"];
node3 [shape = box, label = "Not Included\nN=100"];
node4 [shape = box, label = "Safety Set\nN=700"];
node5 [shape = box, label = "Not Dosed\nN=100"];
node6 [shape = box, label = "Treatment A\nN=200"];
node7 [shape = box, label = "Treatment B\nN=150"];
node8 [shape = box, label = "Treatment C\nN=200"];
node9 [shape = box, label = "Treatment D\nN=150"];
start -> node0 -> node1 -> node4 -> {node6 node7 node8 node9};
node0 -> node2;
node0 -> node3;
node1 -> node5;
}
")
install.packages("diagram")
install.packages("diagram")
library(diagram)
demo("flowchart")
tablevp <-
viewport(x=x, y=y,
width=max(stringWidth(labels)) +
unit(4, "mm"),
height=unit(nlabel, "lines"))
pushViewport(tablevp)
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
library(tidyverse)
library(haven)
library(Hmisc)
library(dplyr)
library(plyr)
library(grid)
library(Gmisc)
grid.newpage()
tablevp <-
viewport(x=x, y=y,
width=max(stringWidth(labels)) +
unit(4, "mm"),
height=unit(nlabel, "lines"))
pushViewport(tablevp)
a <- "Assessed for eligibility"
b <- "Excluded - not eligible"
c <- "Excluded - linkage poor"
d <- "Patients recruited"
e <- "reasons for exclusion"
f <- "available for analysis"
## box 1: assessed for elig
total <- boxGrob(a, x=0.3, y=0.875, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 2: excluded - not eligible
exc_elig <- boxGrob(b, x=0.6, y=0.75, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 3: excluded - linkage poor
exc_link <- boxGrob(c, x=0.6, y=0.625, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 4: patients recruited
recruited <- boxGrob(d, x=0.3, y=0.5, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 5: other exclusions
exc_other <- boxGrob(e, x=0.6, y =0.375, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
## box 6: analysis
analysis <- boxGrob(f, x=0.3, y=0.25, box_gp = gpar(fill = "white"), width = 0.4, height = 0.1)
connectGrob(total, exc_elig, "L")
connectGrob(total, exc_link, "L")
connectGrob(total, recruited, "v")
connectGrob(recruited, exc_other, "L")
connectGrob(recruited, analysis, "v")
plot(total)
plot(exc_elig)
plot(exc_link)
plot(recruited)
plot(exc_other)
plot(analysis)
?connectGrob()
library(DiagrammeR)
library(tidyverse)
library(haven)
library(Hmisc)
library(dplyr)
library(plyr)
library(grid)
library(Gmisc)
library(DiagrammeR)
?create_nodes()
library(DiagrammeR)
?create_nodes()
?create_node_df()
?create_node_df(type)
?create_node_df(type)
?create_edge_df()
g <- create_graph(ndf,
edf,
attr_theme = NULL)
library(tidyverse)
library(haven)
library(Hmisc)
library(dplyr)
library(plyr)
library(grid)
library(Gmisc)
library(DiagrammeR)
a1 <- 'a1'
b1 <- 'b1'
c1 <- 'c1'
d1 <- 'd1'
e1 <- 'e1'
a2 <- 'a2'
b2 <- 'b2'
c2 <- 'c2'
d2 <- 'd2'
e2 <- 'e2'
#Create a node dataframe
ndf <- create_node_df(
n = 10,
label = c(a1, b1, c1, d1, e1, #Column 1
a2, b2, c2, d2, e2), #Column 2
style = c('solid', 'solid', 'solid', 'solid', 'solid', #Column 1
'solid', 'solid', 'solid', 'solid', 'solid'), #Column 2
shape = c('box', 'box', 'box', 'box', 'box', #Column 1
'box', 'box', 'box', 'box', 'box'), #Column 2
width = c(1, 1, 1, 1, 1, #Column 1
1, 1, 1, 1, 1), #Column 2
height = c(1, 1, 1, 1, 1, #Column 1
1, 1, 1, 1, 1), #Column 2
fontsize = c(rep(14, 10)),
fontname = c(rep('Helvetica', 10)),
penwidth = 1.5,
fixedsize = 'true')
#Create an edge dataframe
edf <- create_edge_df(
from = c(1, 2, 3, 4, #Column 1
6, 7, 8, 9, #Column 2
2, 3 #Horizontals
),
to = c(2, 3, 4, 5, #Column 1
7, 8, 9, 10, #Column 2
7, 8 #Horizontals
),
arrowhead = c('none', 'none', 'normal', 'normal', #Column 1
'none', 'none', 'none', 'none', #Column 2
'normal', 'normal' #Horizontals
),
color = c('black', 'black', 'black', 'black', #Column 1
'#00000000', '#00000000', '#00000000', '#00000000', #Column 2
'black', 'black' #Horizontals
),
constraint = c(rep('true', 8), #Columns
rep('false', 2) #Horizontals
)
)
g <- create_graph(ndf,
edf,
attr_theme = NULL)
g
render_graph(g)
install.packages("rsvg")
